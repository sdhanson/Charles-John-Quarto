<% include partials/header.ejs %>
<% include partials/overlay.ejs %>
<link rel='stylesheet' href='/stylesheets/written-list.css' />

<!--Dropdown buttons that overlay the header image-->
<div class="row justify-content-center">
    <!--Category dropdown-->
    <div class="dropdown">
        <button type="button" class="mr-4 header-button btn btn-lg btn-outline-light rounded-0 dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Category</button>
        <div class="dropdown-menu header-dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item header-dropdown-item" href="/written-works/category/poems">Poems</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/category/songs">Songs</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/category/collections/songs">Song Collections</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/category/collections/poetry">Poetry Collections</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/category/collections">All Collections</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works">All</a>
        </div>
    </div>
    <!--End category dropdown-->

    <!--Decade dropdown-->
    <div class="dropdown-2">
        <button type="button" class="ml-2 header-button btn btn-lg btn-outline-light rounded-0 dropdown-toggle" id="dropdownMenuButton2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Year</button>
        <div class="dropdown-menu header-dropdown-menu" aria-labelledby="dropdownMenuButton2">
            <a class="dropdown-item header-dropdown-item" href="/written-works/decade/1960">1960s</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/decade/1970">1970s</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/decade/1980">1980s</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/decade/1990">1990s</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/decade/2000">2000s</a>
            <a class="dropdown-item header-dropdown-item" href="/written-works/decade/present">Present</a>
        </div>
    </div>
    <!--End decade dropdown-->
</div>
<!--End dropdown buttons-->

<!--Closing tags from overlay-->
</div>
</div>

<!--Display for written works-->
<!--Media container for a written work photo, title, and description-->
<!--BOOKS-->
<% if(results.book_list.length === 0 && results.poem_list.length === 0 && results.song_list.length === 0) {%>
<div class="mt-5 container">
    <h1> No Results </h1>
    <a class="no-results" href="/written-works"> BACK TO ALL WORKS
        <i class="fas fa-chevron-right"></i>
    </a>
</div>
<% } else { %>
<hr class="mt-5" width="90%">
<% results.book_list.forEach(function(book) { %>
<div class="media ml-5 mt-0">
    <a href=<%=book.url%>>
        <div class="m-3 media-body align-self-center">
            <% if (book.title) { %>
            <h5 class="mt-0 written-title"><%= book.title %></h5>
            <% } %>
            <% if (book.display) { %>
            <p class="mt-3 written-display"><%= book.display %></p>
            <% } %>
            <div class="mt-4 tags">
                <span class="mr-2">Tags: </span>
                <% if (book.category && book.type) { %>
                <a class="btn btn-outline-dark rounded-0 btn-sm" href="/written-works/category/<%=book.category.toLowerCase()%>/<%= book.type.toLowerCase()%>" role="button"><%= book.category %>s of <%= book.type %>  </a>
                <% } %>
                <% if (book.decade) { %>
                <a class="btn btn-outline-dark rounded-0 btn-sm" href="/written-works/decade/<%=book.decade.toLowerCase()%>" role="button"><%= book.decade %></a>
                <% } %>
            </div>
        </div>
    </a>

</div>
<hr class="mt-2" width="90%">
<% }); %>

<!--POEMS-->
<% results.poem_list.forEach(function(poem) { %>
<div class="media ml-5 mt-0">
    <a href=<%=poem.url%>>
        <div class="m-3 media-body align-self-center">
            <% if (poem.title) { %>
            <h5 class="mt-0 written-title"><%= poem.title %></h5>
            <% } %>
            <!--<% if (poem.book) { %>-->
            <p class="mt-1 written-album">FROM <%= poem.bookTitle %> </p>
            <!--<% } %>-->
            <% if (poem.display) { %>
            <p class="mt-3 written-display"><%= poem.display %></p>
            <% } %>
            <div class="mt-4 tags">
                <span class="mr-2">Tags: </span>
                <% if (poem.category) { %>
                <a class="btn btn-outline-dark rounded-0 btn-sm" href="/written-works/category/<%=poem.category.toLowerCase()%>" role="button"><%= poem.category %>s</a>
                <% } %>
                <% if (poem.decade) { %>
                <a class="btn btn-outline-dark rounded-0 btn-sm" href="/written-works/decade/<%=poem.decade.toLowerCase()%>" role="button"><%= poem.decade %></a>
                <% } %>
            </div>
        </div>
    </a>

</div>
<hr class="mt-2" width="90%">
<% }); %>

<!--SONGS-->
<% results.song_list.forEach(function(song) { %>
<div class="media ml-5 mt-0">
    <a href=<%=song.url%>>
    <div class="m-3 media-body align-self-center">
        <% if (song.title) { %>
            <h5 class="mt-0 written-title"><%= song.title %></h5>
        <% } %>
        <!--<% if (song.album) { %>-->
            <p class="mt-1 written-album">FROM <%= song.albumTitle %> </p>
        <!--<% } %>-->
        <% if (song.display) { %>
            <p class="mt-3 written-display"><%= song.display %></p>
        <% } %>
        <div class="mt-4 tags">
            <span class="mr-2">Tags: </span>
            <% if (song.category) { %>
            <a class="btn btn-outline-dark rounded-0 btn-sm" href="/written-works/category/<%=song.category.toLowerCase()%>" role="button"><%= song.category %>s</a>
            <% } %>
            <% if (song.decade) { %>
            <a class="btn btn-outline-dark rounded-0 btn-sm" href="/written-works/decade/<%=song.decade.toLowerCase()%>" role="button"><%= song.decade %></a>
            <% } %>
        </div>
    </div>
    </a>

</div>
<hr class="mt-2" width="90%">
<% }); %>
<!--End media container-->

<!--start pagination section-->
<div class="paging">
    <% if (pages > 1 && current <= pages) { %>
    <ul class="pagination">
        <% if (current != 1) {%>
        <li class="page-item"><a class="btn btn-outline-dark rounded-0 btn-sm page-link" role="button" href="<%=current-1%>">Previous</a></li>
        <% } %>
        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
        <% if (i !== 1) { %>
        <li class="page-item active"><a class="btn btn-outline-dark rounded-0 btn-sm page-link" role="button">...</a></li>
        <% } %>
        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
        <% if (i == current) { %>
        <li class="page-item active"><a class="btn btn-outline-dark rounded-0 btn-sm page-link" role="button"><%= i %></a></li>
        <% } else { %>
        <li class="page-item"><a class="btn btn-outline-dark rounded-0 btn-sm page-link" href="<%= i %>" role="button" ><%= i %></a></li>
        <% } %>
        <% if (i == Number(current) + 4 && i < pages) { %>
        <li class="page-item active"><a class="btn btn-outline-dark rounded-0 btn-sm page-link" role="button">...</a></li>
        <% } %>
        <% } %>
        <% if (current != pages) { %>
        <li class="page-item"><a class="btn btn-outline-dark rounded-0 btn-sm page-link" href="<%=current-2+3%>" role="button">Next</a></li>
        <% } %>
    </ul>
    <% } %>
</div>
<% } %>


<!--End written works display-->

<script type="text/javascript" src="/javascripts/written-list.js"></script>

<% include partials/footer.ejs %>